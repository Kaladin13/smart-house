## Внутренний дизайн

+ Основная цель - максимальная пропускная способность.
+ Для этой цели все процессы(корутины) логически разбиваются на 4 слоя, образуя конвеер.
+ Конвеер адаптивный: в случае наличия большого числа запросов, они обрабатываюстя пачками, иначе - таймеры "
  проталкивают" дальше по нему, "что остаётся".
+ Таким образом весь сервис выступает одним большим Pipe-ом между двумя Redis очередями.
+ Каждый слой общается с соседними при помощи Switch-ей, по сути представлящих обёртку над `List<Channel<T>>`
+ Каждый канал внутри Switch-а используется патерном доступа "Single Producer Multiple Consumer" в случае балансировки
  и "Single Producer Single Consumer", в случае необходимости доставки сообщения определённому адресату (дому)
  ![Picture](https://raw.githubusercontent.com/Kaladin13/smart-house/iot-dev/backend/iot/iot-diag.svg)
