## –î–∏–∑–∞–π–Ω

***

### –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (üöÄ üöÄ üöÄ üöÄ üöÄ BLAZINGLY FAST üöÄ üöÄ üöÄ üöÄ ).

+ –î–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã(–∫–æ—Ä—É—Ç–∏–Ω—ã) –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ 4 —Å–ª–æ—è, –æ–±—Ä–∞–∑—É—è –∫–æ–Ω–≤–µ–µ—Ä:
    1. Poller - –≤—ã–Ω–∏–º–∞–µ—Ç –∑–∞–¥–∞—á–∏ –ø–∞—á–∫–∞–º–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –¥–ª—è –≤—Å–µ—Ö Consumer-–æ–≤
    2. Consumer - –æ–±—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö Poller-–æ–≤ –∏ –Ω–∞–±–∏—Ä–∞–µ—Ç —Å–≤–æ—é(—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ –±–æ–ª–µ–µ –º–∞–ª–µ–Ω—å–∫—É—é) –ø–∞—á–∫—É –∑–∞–¥–∞—á (–µ—Å–ª–∏ –∑–∞–¥–∞—á
       —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ
       –∏—Å–ø–æ–ª—å–∑—É–µ—Ç flush –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é timeout-–∞)
    3. House - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º –¥–æ–º. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–¥–∞—á—É –æ—Ç Consumer-–æ–≤ –∏ –ø–æ—Å—ã–≤–∞–µ—Ç –æ—Ç—á—ë—Ç –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é
    4. Publisher - –Ω–∞–±–∏—Ä–∞–µ—Ç –æ—Ç—á—ë—Ç—ã –æ—Ç –¥–æ–º–æ–≤ –≤ –ø–∞—á–∫–∏ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ –¥—Ä—É–≥—É—é –æ—á–µ—Ä–µ–¥—å (–µ—Å–ª–∏ –æ—Ç—á—ë—Ç–æ–≤ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ -
       –∏—Å–ø–æ–ª—å–∑—É–µ—Ç flush –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é timeout-–∞)

    + –ö–∞–∂–¥—ã–π —Å–ª–æ–π –æ–±—â–∞–µ—Ç—Å—è —Å —Å–æ—Å–µ–¥–Ω–∏–º–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ Switch-–µ–π, –ø–æ —Å—É—Ç–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—â–∏—Ö –æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ `List<Channel<T>>`
+ –ö–æ–Ω–≤–µ–µ—Ä –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π: –≤ —Å–ª—É—á–∞–µ –Ω–∞–ª–∏—á–∏—è –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Å—Ç—è –ø–∞—á–∫–∞–º–∏, –∏–Ω–∞—á–µ - —Ç–∞–π–º–µ—Ä—ã "
  –ø—Ä–æ—Ç–∞–ª–∫–∏–≤–∞—é—Ç" –¥–∞–ª—å—à–µ –ø–æ –Ω–µ–º—É, "—á—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è". –¢–∞–π–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Exponential Backoff: –≤ –æ—Ç—Å—É—Ç—Å–≤–∏–∏ –∑–∞–¥–∞—á, —Å–µ—Ä–≤–∏—Å –Ω–µ
  –Ω–∞–≥—Ä—É–∂–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É.
+ –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤–µ—Å—å —Å–µ—Ä–≤–∏—Å –≤—ã—Å—Ç—É–ø–∞–µ—Ç –æ–¥–Ω–∏–º –±–æ–ª—å—à–∏–º Pipe-–æ–º –º–µ–∂–¥—É –¥–≤—É–º—è Redis –æ—á–µ—Ä–µ–¥—è–º–∏.

### –í–∑–∞–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Å–µ—Ä–≤–∏—Å–æ–º

***
–û—Å—É—â–µ—Å—Ç–≤–ª—è—Ç–µ—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–≤—É—Ö Redis –æ—á–µ—Ä–µ–¥–µ–π:

+ `request_house` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –¥–æ–º—É (`Request`)
+ `response_house` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –æ—Ç –¥–æ–º–∞ (`Response`)
+ –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ - __–ù–ï–¢__ (—Ç–æ–ª—å–∫–æ —Å–æ–≤–æ–∫—É–ø–Ω—ã–π RPS 4400-4900). –ü–æ –æ–ø—ã—Ç—É –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 2-3—Ö —Å–µ–∫—É–Ω–¥.

–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π:

+ `Request` todo
+ `Response` todo

### –°—Ö–µ–º–∞

***

![Picture](https://raw.githubusercontent.com/Kaladin13/smart-house/iot-dev/backend/iot/pipeline.svg)

### –ú–µ—Ç—Ä–∏–∫–∏

***
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ RPS

![PicRPS](https://raw.githubusercontent.com/Kaladin13/smart-house/iot-dev/backend/iot/chartRPS.svg)

